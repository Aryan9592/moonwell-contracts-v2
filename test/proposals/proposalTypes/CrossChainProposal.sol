pragma solidity 0.8.19;

import {MarketCreationHook} from "@test/proposals/hooks/MarketCreationHook.sol";
import {MultisigProposal} from "@test/proposals/proposalTypes/MultisigProposal.sol";
import {Proposal} from "@test/proposals/proposalTypes/Proposal.sol";

import "@forge-std/Test.sol";

import {MoonwellArtemisGovernor} from "@protocol/core/Governance/deprecated/MoonwellArtemisGovernor.sol";

/// Reuse Multisig Proposal contract for readability and to avoid code duplication
abstract contract CrossChainProposal is MultisigProposal, MarketCreationHook {
    uint32 public nonce; /// nonce for wormhole

    /// instant finality on moonbeam https://book.wormhole.com/wormhole/3_coreLayerContracts.html?highlight=consiste#consistency-levels
    uint16 public constant consistencyLevel = 200;

    /// @notice hex encoded description of the proposal
    bytes public constant PROPOSAL_DESCRIPTION = hex"23204d49502d42303a204163746976617465204d6f6f6e77656c6c206f6e20426173655c6e5c6e5c6e23232053756d6d6172795c6e5c6e5c6e466f6c6c6f77696e6720746865207375636365737366756c2070617373616765206f66205b4d49502d33395d2868747470733a2f2f666f72756d2e6d6f6f6e77656c6c2e66692f742f6d69702d33392d61637469766174652d6d6f6f6e77656c6c2d6f6e2d626173652d6d61696e6e65742f343134292c20492070726f706f7365207468617420746865204d6f6f6e77656c6c20636f6d6d756e69747920766f746520746f20617574686f72697a65207468652061637469766174696f6e206f6620746865204d6f6f6e77656c6c2070726f746f636f6c206f6e2042617365206d61696e6e65742c2075706f6e207075626c6963206c61756e6368206f6e2041756775737420392c20323032332e5c6e5c6e5c6e426173652069732061207365637572652c206c6f772d636f73742c20616e6420646576656c6f7065722d667269656e646c79204c3220666f7220646563656e7472616c697a6564206170706c69636174696f6e7320616e6420686173206265656e20696e6375626174656420627920436f696e6261736520696e20636f6c6c61626f726174696f6e2077697468204f7074696d69736d2e20576974682074686520676f616c206f6620737065617268656164696e6720746865206e6578742077617665206f66206f6e636861696e2061646f7074696f6e2c20426173652069732061696d696e6720746f20637265617465206120667574757265206f6620677265617465722066696e616e6369616c2066726565646f6d20616e6420696e636c7573697669747920666f7220616c6c2e5c6e5c6e5c6e42792061637469766174696e67204d6f6f6e77656c6c206f6e20426173652c2077652063616e206a6f696e20696e2074686973206d697373696f6e20746f20696e637265617365206f6e636861696e2061646f7074696f6e20616e642066696e616e6369616c20656d706f7765726d656e74206279206272696e67696e67206f7572206e65776c7920726564657369676e656420616e642073696d706c69666965642061707020746f20436f696e626173652075736572732061726f756e642074686520776f726c642e204261736520726570726573656e7473206120756e69717565206f70706f7274756e69747920666f72204d6f6f6e77656c6c20746f20657870616e642063726f73732d636861696e20696e7465726f7065726162696c697479206f6e20612076616c75652d616c69676e656420636861696e20616e64206272696e672074686520706f776572206f66206f6e636861696e2066696e616e636520746f2061206e65772067656e65726174696f6e206f662063727970746f2075736572732e5c6e5c6e5c6e23232041626f757420426173655c6e5c6e5c6e5b426173655d2868747470733a2f2f626173652e6f72672f292069732061204c61796572203220284c322920626c6f636b636861696e20646576656c6f706564206f6e2074686520457468657265756d206e6574776f726b2e2053696e63652042617365206f7065726174657320617320616e206f7074696d697374696320726f6c6c75702c2069742070726f7669646573207375627374616e7469616c20656e68616e63656d656e747320696e207363616c6162696c69747920636f6d706172656420746f204c3120457468657265756d2c207768696c65206d61696e7461696e696e67206974732073656375726974792066726f6d2074686520457468657265756d2062617365206c617965722e20466f6c6c6f77696e672074686520746573746e6574206c61756e6368206f6e2046656272756172792032342c20323032332c2042617365206d61696e6e65742077696c6c206f70656e20746f2065766572796f6e65206f6e2041756775737420392c20323032332e5c6e5c6e5c6e4275696c74206f6e205b426564726f636b5d2868747470733a2f2f6465762e6f7074696d69736d2e696f2f696e74726f647563696e672d6f7074696d69736d2d626564726f636b2f292c2074686520666972737420697465726174696f6e206f6620746865205b4f5020537461636b5d2868747470733a2f2f6f7074696d69736d2e6d6972726f722e78797a2f664c6b3555476a5a446958467576516836525f4873634d51757559394142594e4637504937362d714a5973292c2042617365206c6576657261676573204f7074696d69736d2773206672616d65776f726b7320666f72207363616c6162696c69747920616e6420646576656c6f706d656e742e20546865204f5020537461636b206973206120736574206f66204d49542d6c6963656e736564206f70656e2d736f7572636520736f667477617265207468617420616e796f6e652063616e20757365206f7220666f726b20616e6420726570726573656e7473206120766973696f6e20666f7220457468657265756d207363616c6162696c69747920616e64206d6f64756c61726974792e2057697468207374616e64617264697a6174696f6e20616e64206d6f64756c61726974792c20636f6d65732074686520706f74656e7469616c20666f7220696e7465726f70657261626c65204c327320696e636c7564696e67204261736520746f206d616e696665737420696e746f2061206c6172676572205b225375706572636861696e225d2868747470733a2f2f6170702e6f7074696d69736d2e696f2f7375706572636861696e292e20426173652077696c6c20616c736f20636f6e7472696275746520746f204f7074696d69736d2773205b526574726f5047465d2868747470733a2f2f6f7074696d69736d2e6d6972726f722e78797a2f77716b315965796e324f6856397061447a6252587651306d304a594475326e7062536b4d436c776b31725929206d6f64656c2c20696e63656e746976697a696e672074686520646576656c6f706d656e74206f6620746865206f70656e2d736f75726365207075626c696320676f6f64732074686174206f7572206469676974616c20776f726c642072656c6965732075706f6e2e5c6e5c6e5c6e436f696e6261736520697320612070726f76656e206c656164657220696e20746865206469676974616c2061737365742073706163652e204166746572207075626c6963697a696e6720697473206f6e636861696e20616d626974696f6e73206e6561726c7920372079656172732061676f20696e20746865697220225b536563726574204d617374657220506c616e5d2868747470733a2f2f7777772e636f696e626173652e636f6d2f626c6f672f7468652d636f696e626173652d7365637265742d6d61737465722d706c616e292c22204261736527732072656c65617365206d61726b7320746865206e657874206d696c6573746f6e6520746f7761726473207265616c697a696e672069747320676f616c206f66206372656174696e6720612066696e616e6369616c2073797374656d20636f6e73697374696e67206f6620646563656e7472616c697a6564206170706c69636174696f6e73206f6e20616e206f70656e20616e6420676c6f62616c6c792061636365737369626c65206e6574776f726b2077697468206120757365722062617365206f66206f6e652062696c6c696f6e2070656f706c652e5c6e5c6e5c6e2323204d6f7469766174696f6e5c6e5c6e5c6e41637469766174696e67204d6f6f6e77656c6c206f6e2042617365206d61696e6e6574206f66666572732061206e756d626572206f662062656e656669747320746f20746865204d6f6f6e77656c6c20636f6d6d756e6974792c20696e636c7564696e67206f70706f7274756e697469657320746f3a5c6e5c6e5c6e312e20457870616e642063726f73732d636861696e20696e7465726f7065726162696c6974795c6e322e20556e6c6f636b2061206d617373697665207461726765742061756469656e63652c20436f696e626173652075736572735c6e332e204275696c64206f6e207368617265642076616c7565735c6e5c6e5c6e2a2a457870616e642063726f73732d636861696e20696e7465726f7065726162696c6974792a2a5c6e5c6e5c6e546865206c61756e6368206f662042617365206f666665727320616e206f70706f7274756e69747920746f20636f6e6e6563742074686520656e7469726520446f7473616d612065636f73797374656d207769746820457468657265756d20696e2061207761792074686174207761736e277420706f737369626c65206265666f72652e20546865204d6f6f6e77656c6c2070726f746f636f6c206e6f772068617320746865206361706162696c697479206f6620676f696e672063726f73732d636861696e20616e64206272696e67696e67207468652062657374206173736574732066726f6d207468652065636f73797374656d20746f206d696c6c696f6e73206f6620436f696e626173652075736572732c20696e636c7564696e6720474c4d5220616e6420444f542e5c6e5c6e5c6e53696e636520746865204d6f6f6e77656c6c20636f6d6d756e69747920666972737420616374697661746564204d6f6f6e77656c6c206f766572203138206d6f6e7468732061676f2c207765206861766520707572737565642074686520676f616c206f6620636f6e6e656374696e672074686520506f6c6b61646f7420616e64204b7573616d612065636f73797374656d7320746f2074686520776f726c64206f66206f6e636861696e2066696e616e63652e20546865204d6f6f6e77656c6c20636f6d6d756e69747920616c736f2073686172657320746865204d6f6f6e6265616d20766973696f6e206f66205b636f6e6e656374656420736d61727420636f6e7472616374735d2868747470733a2f2f747769747465722e636f6d2f4d6f6f6e6265616d4e6574776f726b2f7374617475732f313632343037393130343232373238323934353f733d32302920776974682045564d206173207468652062617365206c617965722e205468697320766973696f6e20697320737570706f72746564206279207468652063726f73732d636861696e20696e746567726174696f6e7320616e6420666561747572657320617661696c61626c65206f6e204d6f6f6e6265616d2c206c696b652074686520576f726d686f6c65206d6573736167652070617373696e672070726f746f636f6c2c20776869636820616c6c6f777320666f72204d6f6f6e77656c6c20746f20657870616e6420746f20426173652c207265616368696e67206576656e206d6f72652070656f706c652e5c6e5c6e5c6e2a2a556e6c6f636b2061206d617373697665207461726765742061756469656e63652c20436f696e626173652075736572732a2a5c6e5c6e5c6e4261736520726570726573656e74732061206d617373697665207461726765742061756469656e636520666f72204d6f6f6e77656c6c20e2809420436f696e626173652773206d696c6c696f6e73206f662076657269666965642075736572732e20436f696e6261736527732072657461696c206d6f62696c6520617070206e6f7720696e636c7564657320612022776562332220746162207468617420656e61626c657320436f696e6261736520757365727320746f20656173696c7920696e7465726163742077697468206f6e636861696e2061707073206c696b65204d6f6f6e77656c6c20616e64206d6f766520617373657473206163726f7373207468652065636f73797374656d2e5c6e5c6e5c6e41637469766174696e67204d6f6f6e77656c6c206f6e204261736520726570726573656e747320616e206f70706f7274756e69747920746f206578706f736520757020746f203131306d20757365727320746f2074686520776f726c64206f66206f6e636861696e2066696e616e636520616e642066616d696c696172697a65207468656d2077697468206f7572206578697374696e672061637469766174696f6e73206f6e204d6f6f6e6265616d20616e64204d6f6f6e72697665722e204173206f6e65206f66207468652066697273742070726f6a6563747320746f206163746976617465206f6e20426173652c204d6f6f6e77656c6c2077696c6c20656e6a6f79206561726c79206d6f7665722062656e656669747320287370656369666963616c6c7920696e2061747472616374696e672073756666696369656e74206c69717569646974792920616e64206a6f696e206120636f6d6d756e697479206f662077656233206769616e7473206c696b65205375736869737761702c20436861696e6c696e6b2c2042616c616e6365722c20616e6420576f726d686f6c652e5c6e5c6e5c6e2a2a4275696c64206f6e207368617265642076616c7565732a2a5c6e5c6e5c6e576974682074686520756e7665696c696e67206f66204d6f6f6e77656c6c2773206e65776c7920726564657369676e656420616e642073747265616d6c696e6564206170702c20746865204d6f6f6e77656c6c20636f6d6d756e6974792068617320726561666669726d65642069747320636f6d6d69746d656e7420746f20696e636c7573697669747920616e64206163636573736962696c6974792e2054686573652076616c7565732061726520616c69676e65642077697468207468652042617365206574686f73206f6620224261736520697320666f722065766572796f6e652220616e6420436f696e626173652773206c6f6e672d68656c642064657369726520746f2063726561746520616e206f70656e20616e6420676c6f62616c2063727970746f65636f6e6f6d792e5c6e5c6e5c6e4f757220696e747569746976652c20757365722d667269656e646c792061707020686173206265656e2064657369676e656420746f20627265616b20646f776e207468652062617272696572732074686174206861766520686973746f726963616c6c79206d6164652044654669207365656d20636f6d706c657820616e6420696e74696d69646174696e6720746f206d616e792e204279206272696e67696e6720746865206e6577204d6f6f6e77656c6c2061707020746f20426173652c2077652063616e2068656c7020746f20696e6372656173652066696e616e6369616c2066726565646f6d207468726f7567686f75742074686520776f726c6420616e6420656d706f77657220746865206e6578742067656e65726174696f6e206f66206f6e636861696e2061646f70746572732e5c6e5c6e5c6e5c6e5c6e232320496d706c656d656e746174696f6e5c6e5c6e5c6e54686520696d706c656d656e746174696f6e206f6620746869732070726f706f73616c20697320636f6d707269736564206f662074686520666f6c6c6f77696e672073746570733a20284e6f746520746861742064756520746f207468652063726f73732d636861696e206e6174757265206f6620746869732070726f706f73616c2c2074686520676f7665726e616e636520706f7274616c20646f65736e27742063757272656e746c7920646973706c6179206561636820696e646976696475616c2073746570295c6e5c6e5c6e312e202a2a416363657074696e672041646d696e206f6e204d6f6f6e77656c6c204261736520436f6e7472616374733a2a2a5c6e2d20496e766f6b65207468652061636365707441646d696e2066756e6374696f6e206f6e204d6f6f6e77656c6c2773204261736520636f6e7472616374732c2061737369676e696e6720676f7665726e616e63652072696768747320746f20746865204d6f6f6e77656c6c2054656d706f72616c20476f7665726e6f722e5c6e20202020312e2053696d696c61722070726976696c65676573206172652061737369676e656420746f20476f7665726e6f72416c706861206f6e204d6f6f6e77656c6c2773204d6f6f6e6265616d20616e64204d6f6f6e7269766572206465706c6f796d656e74732e5c6e322e202a2a53657474696e6720426f72726f7720616e6420537570706c792043617020477561726469616e3a2a2a5c6e2d20496e20616c69676e6d656e742077697468204761756e746c6574277320225b496e697469616c205265636f6d6d656e646174696f6e7320666f72204d6f6f6e77656c6c206f6e204261736520616e642043617020477561726469616e736869705d2868747470733a2f2f736e617073686f742e6d6f6f6e77656c6c2e66692f232f70726f706f73616c2f307861386435366237356433353736313830356333666265363333303537613234383462373039346564653065313065353064653738393236613865383637616464292220536e617073686f742070726f706f73616c2c204761756e746c65742773206d756c746973696720616464726573732077696c6c2062652061737369676e656420626f72726f7720616e6420737570706c792063617020677561726469616e736869702e5c6e2d2054686973206e657720726f6c6520616c6c6f777320666f72204761756e746c657420746f2070726f6d70746c79206d6f6469667920626f72726f7720616e6420737570706c79206361707320696e20726573706f6e736520746f206d61726b6574207269736b206576656e74732c206f6e636861696e20444558206c697175696469747920666c756374756174696f6e732c20616e64206368616e67657320696e206c697175696469747920706f6f6c2075736167652e5c6e2d204761756e746c6574277320626f72726f7720616e6420737570706c792063617020677561726469616e736869702077696c6c206f6e6c7920626520656e616374656420666f72204d6f6f6e77656c6c2773206465706c6f796d656e74206f6e20426173652e204d6f726520696e666f726d6174696f6e2063616e20626520666f756e6420696e205b7468697320666f72756d20706f73745d2868747470733a2f2f666f72756d2e6d6f6f6e77656c6c2e66692f742f6761756e746c6574732d696e697469616c2d7265636f6d6d656e646174696f6e732d666f722d6d6f6f6e77656c6c2d6f6e2d626173652f3533362f34292e5c6e332e202a2a556e70617573696e67204d696e74206f6e204d6f6f6e77656c6c27732042617365204d61726b6574733a2a2a5c6e2d20546865206d696e742066756e6374696f6e2077696c6c20626520756e706175736564206f6e204d6f6f6e77656c6c27732042617365206d61726b6574732e5c6e2d20546865206d61726b65747320737570706f72746564206174206c61756e6368206172653a204554482c205553444320285553446243292c20616e642063624554482e5c6e2d20546869732077696c6c20656e61626c6520757365727320746f20737570706c79206f72206465706f7369742061737365747320696e746f207468657365206e6577206d61726b657473206f6e6365207468652070726f706f73616c20686173206265656e206578656375746564206f6e20426173652e5c6e342e202a2a4d696e74696e67206d546f6b656e7320746f2061646472657373206120706f74656e7469616c202248756e647265642046696e616e636522206578706c6f69743a2a2a5c6e2d204120736d616c6c207175616e74697479206f66206d546f6b656e7320284d6f6f6e77656c6c20636f6c6c61746572616c20746f6b656e73292077696c6c206265206d696e74656420616e64207472616e7366657272656420746f20612064657369676e61746564206275726e20616464726573732e5c6e2d20546869732070726f616374697665206d65617375726520697320696e74656e64656420746f206d6974696761746520616e7920706f74656e7469616c207269736b73206173736f636961746564207769746820746865205b48756e647265642046696e616e63652065786368616e67652072617465206578706c6f69745d2868747470733a2f2f7777772e68616c626f726e2e636f6d2f626c6f672f706f73742f6578706c61696e65642d7468652d68756e647265642d66696e616e63652d6861636b2d617072696c2d32303233292e5c6e352e202a2a45737461626c697368696e6720476f7665726e616e636520477561726469616e733a2a2a5c6e2d20496e74726f64756374696f6e206f66204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e7320617320612070726f74656374697665206d6561737572652c20686176696e6720646973637265746520706f7765727320746f2068616c742054656d706f72616c20476f7665726e616e636520696620616e20696c6c65676974696d6174652070726f706f73616c2069732071756575656420696e746f2074686520576f726d686f6c652074696d656c6f636b2e5c6e2d205468697320726f6c652077696c6c20626520737570706f727465642062792061206d756c74697369672c20726571756972696e67207468726565206f6620746865206669766520476f7665726e616e636520477561726469616e7320746f2070617573652054656d706f72616c20476f7665726e616e63652e5c6e20202020312e2054686520476f7665726e616e636520477561726469616e206d756c746973696720686173206265656e206372656174656420616e642063616e20626520766965776564205b686572655d2868747470733a2f2f6170702e736166652e676c6f62616c2f686f6d653f736166653d626173653a307834343633343241463446336243443337343237363839314336626233343131626632463837373945295c6e5c6e5c6e232323204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e735c6e5c6e5c6e4d6f6f6e77656c6c27732042617365206465706c6f796d656e742069732064657369676e656420746f20626520676f7665726e65642062792057454c4c20746f6b656e20686f6c646572732066726f6d204d6f6f6e6265616d204e6574776f726b2e205468697320696e6e6f76617469766520617070726f61636820697320666163696c6974617465642062792054656d706f72616c20476f7665726e616e63652c20776869636820656e61626c65732063726f73732d636861696e20676f7665726e616e6365207669612074686520576f726d686f6c65206d6573736167652070617373696e672070726f746f636f6c2e5c6e5c6e5c6e2d202a2a54656d706f72616c20476f7665726e616e63653a2a2a5c6e2d2041206e65776c7920646576656c6f70656420616e64205b617564697465645d2868747470733a2f2f6769746875622e636f6d2f48616c626f726e53656375726974792f5075626c69635265706f7274732f626c6f622f6d61737465722f536f6c6964697479253230536d617274253230436f6e74726163742532304175646974732f4d6f6f6e77656c6c5f46696e616e63655f436f6e7472616374735f56325f536d6172745f436f6e74726163745f53656375726974795f4173736573736d656e745f5265706f72745f48616c626f726e5f46696e616c2e7064662920636f6e74726163742074686174206c65766572616765732074686520576f726d686f6c652070726f746f636f6c2e5c6e2d20466163696c6974617465732063726f73732d636861696e20766572696669636174696f6e20616e6420657865637574696f6e206f66204d6f6f6e77656c6c20496d70726f76656d656e742050726f706f73616c73206f6e20426173652e5c6e2d202a2a54696d656c6f636b20526571756972656d656e743a2a2a5c6e2d20416e206164646974696f6e616c2032342d686f75722074696d656c6f636b20697320696d706f73656420616674657220612070726f706f73616c2773207375636365737366756c2070617373616765206f6e204d6f6f6e6265616d206265666f7265206974206d6179206265206578656375746564206f6e20426173652e5c6e2d20546869732074696d656c6f636b20706572696f6420656e61626c657320746865205b576f726d686f6c6520477561726469616e735d2868747470733a2f2f776f726d686f6c6563727970746f2e6d656469756d2e636f6d2f776f726d686f6c652d677561726469616e732d657665727374616b652d3833616662373335636464642920746f20636f6e6669726d2074686174207468652070726f706f73616c2077617320696e64656564207375636365737366756c2c2070726f766964696e6720616e206578747261206c61796572206f6620736563757269747920616e642076616c69646174696f6e2e5c6e5c6e5c6e2d202a2a476f7665726e616e636520477561726469616e20526f6c653a2a2a5c6e2d2050726f706f73656420617320612073616665677561726420616761696e737420706f74656e7469616c206578706c6f69746174696f6e206f662074686520576f726d686f6c6520627269646765206f7220636f6d70726f6d697365206f662074686520576f726d686f6c6520477561726469616e732e5c6e2d20546865204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e20726f6c652077696c6c2068617665206c696d6974656420706f776572732c20696e636c7564696e673a5c6e202020202d2050617573696e672054656d706f72616c20476f7665726e616e636520746f2070726576656e742061206d616c6963696f75732c207175657565642070726f706f73616c2066726f6d20657865637574696e67206f6e20426173652e5c6e202020202d20457865637574696e6720612076616c69642c207375636365737366756c2070726f706f73616c207768696c652054656d706f72616c20476f7665726e616e6365206973207061757365642e5c6e2d20546865204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e206d756c74697369672077696c6c20726571756972652033206f6620746865203520476f7665726e616e636520477561726469616e7320746f20616772656520696e206f7264657220746f2070617573652054656d706f72616c20476f7665726e616e6365206f72206578656375746520612076616c69642070726f706f73616c2e5c6e2d2049662054656d706f72616c20476f7665726e616e63652069732065766572207061757365643a5c6e202020202d20476f7665726e616e636520477561726469616e732063616e6e6f7420756e70617573652e2041204d6f6f6e77656c6c20496d70726f76656d656e742050726f706f73616c2077696c6c20626520726571756972656420746f20756e70617573652054656d706f72616c20476f7665726e616e63652e5c6e202020202d20476f7665726e616e636520477561726469616e732077696c6c20626520756e61626c6520746f2070617573652054656d706f72616c20476f7665726e616e636520616761696e20756e74696c2061206e6577204d6f6f6e77656c6c20496d70726f76656d656e742050726f706f73616c20726561737369676e732074686520476f7665726e616e636520477561726469616e20726f6c652e5c6e202020202d2054656d706f72616c20676f7665726e616e63652063616e206265207065726d697373696f6e6c6573736c7920756e7061757365642061667465722061207369676e69666963616e742074696d652064656c6179206f6620333020646179732c206d697469676174696e6720746865207269736b206f662061206d616c6963696f7573206f722070726f6c6f6e6765642070617573652e5c6e2d20546865204d6f6f6e77656c6c20636f6d6d756e6974792069732061626c6520746f20766f746520746f207265766f6b65204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e73686970207468726f756768207468652070617373616765206f662061204d6f6f6e77656c6c20496d70726f76656d656e742050726f706f73616c2e5c6e5c6e5c6e2a2a544c44523a2a2a2054686520476f7665726e616e636520477561726469616e20726f6c65206f6e6c792065786973747320696e206361736520576f726d686f6c652069732061747461636b656420616e64207468652061747461636b6572207375626d69747320612070726f706f73616c207468617420444944204e4f54207375636365737366756c6c792070617373204d6f6f6e77656c6c20676f7665726e616e63652e20496e20746861742072617265206576656e742c2074686520677561726469616e732063616e2070617573652077697468696e20323420686f75727320746f2070726576656e74207468652061747461636b2066726f6d2074616b696e6720706c6163652e5c6e5c6e5c6e54686520666f6c6c6f77696e67204d6f6f6e77656c6c20636f6e7472696275746f727320616e6420636f6d6d756e697479206d656d6265727320686176652067656e65726f75736c7920766f6c756e74656572656420746f2062652074686520696e697469616c20736574206f66204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e733a5c6e5c6e5c6e2d205b4761756e746c65745d2868747470733a2f2f747769747465722e636f6d2f6761756e746c65745f78797a295c6e2d205b57617264656e5d2868747470733a2f2f747769747465722e636f6d2f77617264656e5f66696e616e6365295c6e2d205b4272616e646f6e204b6173655d2868747470733a2f2f747769747465722e636f6d2f626b6173655f295c6e2d205b583073306c5d2868747470733a2f2f747769747465722e636f6d2f783073306c295c6e2d205b436f6f6c686f7273656769726c5d2868747470733a2f2f747769747465722e636f6d2f636f6f6c686f7273656769726c32295c6e5c6e5c6e2323202a2a566f74696e672a2a5c6e5c6e5c6e546865206465636973696f6e20746f206163746976617465204d6f6f6e77656c6c206f6e20426173652069732061207369676e69666963616e74206f6e6520616e642049207374726f6e676c7920656e636f7572616765206576657279204d6f6f6e77656c6c20636f6d6d756e697479206d656d62657220746f20766f74653a5c6e5c6e5c6e2d202a2a5965733a2a2a20427920766f74696e6720225965732c2220796f752061726520737570706f7274696e67207468652061637469766174696f6e206f66204d6f6f6e77656c6c206f6e2042617365206d61696e6e65742c20746865206372656174696f6e206f6620746865204d6f6f6e77656c6c20476f7665726e616e636520477561726469616e20726f6c652c2074686520756e70617573696e672028746f20616374697661746529204d6f6f6e77656c6c206d61726b657473206f6e20426173652c20746865206275726e696e67206f66206d546f6b656e7320746f2070726576656e742061202248756e647265642046696e616e636522207374796c65206578706c6f69742c20616e64207468652064657369676e6174696f6e206f66204761756e746c657420617320626f72726f7720616e6420737570706c792063617020677561726469616e2e5c6e2d202a2a4e6f3a2a2a20427920766f74696e6720224e6f2c2220796f7520617265207369676e616c696e67207468617420796f752070726566657220746865204d6f6f6e77656c6c2070726f746f636f6c20746f2072656d61696e2061732069732c20776974686f75742061637469766174696e67206f6e207468652042617365206d61696e6e657420617420746869732074696d652e5c6e5c6e5c6e2323202a2a436f6e636c7573696f6e2a2a5c6e5c6e5c6e41637469766174696e6720746865204d6f6f6e77656c6c2070726f746f636f6c206f6e20426173652069732061206372756369616c207374657020746f77617264732062726f6164656e696e6720616e6420646576656c6f70696e6720746865204d6f6f6e77656c6c20636f6d6d756e69747920616e64206272696e67696e6720656173792d746f2d757365206f6e636861696e2066696e616e636520746f20436f696e626173652075736572732061726f756e642074686520776f726c642e205468652070726f7370656374206f6620656e68616e63696e67204d6f6f6e77656c6c2773206163636573736962696c69747920616e64206c696e6b696e672074686520506f6c6b61646f7420616e64204b7573616d612065636f73797374656d7320746f20457468657265756d207468726f756768204d6f6f6e77656c6c27732042617365206465706c6f796d656e742c20706172746963756c61726c792061742074686973206561726c792073746167652c20697320736f206578636974696e672e5c6e5c6e5c6e496e2073686f72742c2061637469766174696e67204d6f6f6e77656c6c206f6e20426173652070726f766964657320612063616e27742d6d697373206f70706f7274756e69747920746f20626f6f73742063726f73732d636861696e20696e7465726f7065726162696c69747920616e6420657870616e64206f757220676c6f62616c20636f6d6d756e6974792e2057652077696c6c206861766520746865206f70706f7274756e69747920746f206272696e672074686520706f776572206f66206f6e636861696e2066696e616e636520746f206e65772075736572732061726f756e642074686520776f726c64207768696c652072656d61696e696e67206669726d6c7920726f6f74656420696e206f757220636f72652076616c756573206f662073656375726974792c207472616e73706172656e63792c20616e6420646563656e7472616c697a6174696f6e2e5c6e";

    /// @notice set the nonce for the cross chain proposal
    function _setNonce(uint32 _nonce) internal {
        nonce = _nonce;
    }

    /// @notice push a CrossChain proposal action
    function _pushCrossChainAction(
        uint256 value,
        address target,
        bytes memory data,
        string memory description
    ) internal {
        require(value == 0, "Cross chain proposal cannot have value");
        _pushMultisigAction(value, target, data, description);
    }

    /// @notice push a CrossChain proposal action with a value of 0
    function _pushCrossChainAction(
        address target,
        bytes memory data,
        string memory description
    ) internal {
        _pushCrossChainAction(0, target, data, description);
    }

    /// @notice simulate cross chain proposal
    /// @param temporalGovAddress address of the cross chain governor executing the calls
    /// run pre and post proposal hooks to ensure that mToken markets created by the
    /// proposal are valid and mint at least 1 wei worth of mTokens to address 0
    function _simulateCrossChainActions(address temporalGovAddress) internal {
        _verifyActionsPreRun(actions);
        _simulateMultisigActions(temporalGovAddress);
        _verifyMTokensPostRun();
    }

    function getTargetsPayloadsValues()
        public
        view
        returns (address[] memory, uint256[] memory, bytes[] memory)
    {
        /// target cannot be address 0 as that call will fail
        /// value can be 0
        /// arguments can be 0 as long as eth is sent

        uint256 proposalLength = actions.length;

        address[] memory targets = new address[](proposalLength);
        uint256[] memory values = new uint256[](proposalLength);
        bytes[] memory payloads = new bytes[](proposalLength);

        for (uint256 i = 0; i < proposalLength; i++) {
            require(
                actions[i].target != address(0),
                "Invalid target for governance"
            );

            /// if there are no args and no eth, the action is not valid
            require(
                (actions[i].arguments.length == 0 && actions[i].value > 0) ||
                    actions[i].arguments.length > 0,
                "Invalid arguments for governance"
            );

            targets[i] = actions[i].target;
            values[i] = actions[i].value;
            payloads[i] = actions[i].arguments;
        }

        return (targets, values, payloads);
    }

    function getTemporalGovCalldata(
        address temporalGovernor
    ) public view returns (bytes memory) {
        (
            address[] memory targets,
            uint256[] memory values,
            bytes[] memory payloads
        ) = getTargetsPayloadsValues();

        /// TODO verify calldata size is under wormhole max message size limit
        return
            abi.encodeWithSignature(
                "publishMessage(uint32,bytes,uint8)",
                nonce,
                abi.encode(temporalGovernor, targets, values, payloads),
                consistencyLevel
            );
    }

    function getArtemisGovernorCalldata(
        address temporalGovernor,
        address wormholeCore
    ) public view returns (bytes memory) {
        bytes memory temporalGovCalldata = getTemporalGovCalldata(
            temporalGovernor
        );

        address[] memory targets = new address[](1);
        targets[0] = wormholeCore;

        uint256[] memory values = new uint256[](1);
        values[0] = 0;

        bytes[] memory payloads = new bytes[](1);
        payloads[0] = temporalGovCalldata;

        string[] memory signatures = new string[](1);
        signatures[0] = "";

        bytes memory artemisPayload = abi.encodeWithSignature(
            "propose(address[],uint256[],string[],bytes[],string)",
            targets,
            values,
            signatures,
            payloads,
            string(PROPOSAL_DESCRIPTION)
        );

        return artemisPayload;
    }

    function printActions(
        address temporalGovernor,
        address wormholeCore
    ) public {
        bytes memory temporalGovCalldata = getTemporalGovCalldata(
            temporalGovernor
        );

        console.log("temporal governance calldata");
        emit log_bytes(temporalGovCalldata);

        bytes memory wormholeTemporalGovPayload = abi.encodeWithSignature(
            "publishMessage(uint32,bytes,uint8)",
            nonce,
            temporalGovCalldata,
            consistencyLevel
        );

        console.log("wormhole publish governance calldata");
        emit log_bytes(wormholeTemporalGovPayload);

        bytes memory artemisPayload = getArtemisGovernorCalldata(
            temporalGovernor,
            wormholeCore
        );

        console.log("artemis governor queue governance calldata");
        emit log_bytes(artemisPayload);
    }
}
